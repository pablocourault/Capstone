{% extends "hotel/layout.html" %}
{% load i18n %}

{% load static %}

{% block script %}
    <script src="{% static 'hotel/mybookings.js' %}"></script>
{% endblock %}

{% block body %}

<div class="row">
    <div class="col-lg-12 col-sm-12 booking-title"> 
    {% translate 'My Bookings' %}
    </div>
</div>

<div class="row">
   <div class="col-lg-3 col-sm-12">
   </div>

   
   <div class="col-lg-6 col-sm-12">

    {% if post %}
    <div class="alert alert-success border border-success booking-info">
      <div class="material-icons-outlined booking-info-icon">done</div>
      <div class="booking-info-strong"> {% translate 'Your booking has been registered' %} </div>
      <div class="booking-info-normal"> {% translate 'Check In' %}: {{ datein_booking }} 
                                        {% translate 'Check Out' %}: {{ dateout_booking }} </div>

      <div class="booking-info-normal"> 
          {% if singles_booking > 0 %}
          {% translate 'Single' %}: {{ singles_booking }} &nbsp;
          {% endif %}
          {% if doubles_booking > 0 %}
          {% translate 'Double' %}: {{ doubles_booking }} &nbsp;
          {% endif %}
          {% if triples_booking > 0 %}
          {% translate 'Triple' %}: {{ triples_booking }} &nbsp;
          {% endif %}
          {% if quadruples_booking > 0 %}
          {% translate 'Quadruple' %}: {{ quadruples_booking }}
          {% endif %}
      </div>

      <div class="booking-info-normal"> 
        <b>Total: {{ amount_booking }}</b>
    </div>

    </div>

  {% endif %}

  {% if error %}
  <div class="alert alert-danger border border-danger booking-terms">
    <div class="material-icons booking-info-icon">error</div>
      <div> Booking error: {{ message }} </div>
  </div>
  {% endif %}

  {% if bookings %}

  <table class="table" id="mybookings-table">
    <thead class="thead-light">
      <tr>
        <th scope="col"> {% translate 'Booking ID' %} </th>
        <th scope="col"> {% translate 'Check In' %} </th>
        <th scope="col"> {% translate 'Check Out' %} </th>
        <th scope="col"> {% translate 'Rooms' %} </th>
        <th scope="col"> {% translate 'Total Amount' %} </th>
        <th scope="col" colspan="2"> {% translate 'Actions' %}</th>
      </tr>
    </thead>
    <tbody>

      {% for bk in bookings %} 
      <tr id='tr-{{bk.id}}'>
         <td> {{ bk.id }} </td>
          <td> {{ bk.checkin_date }} </td>
          <td> {{ bk.checkout_date }} </td>
          <td> 
            {% if bk.singles > 0 %}
               Singles: {{ bk.singles}}
            {% endif %}
            {% if bk.doubles > 0 %}
               Doubles: {{bk.doubles}}
            {% endif %}
            {% if bk.triples > 0 %}
               Triples: {{bk.triples}}
            {% endif %}
            {% if bk.quadruples > 0 %}
               quadruples: {{bk.quadruples}}
            {% endif %} 
          </td>
          <td> {{ bk.amount}} </td>
          {% if bk.checkin %}
          <td></td>
          <td> <button type="button" class="btn btn-outline-primary mybookings-btn btn-checkout" data-checkout_id='{{bk.id}}'> {% translate 'Check Out' %} </button> </td>
          {% else %}
          <td><button type="button" class="btn btn-outline-danger mybookings-btn btn-delete" data-delete_id='{{bk.id}}'> {% translate 'Delete' %}  </button></td>
          <td><button type="button" class="btn btn-outline-success mybookings-btn btn-checkin" data-checkin_id='{{bk.id}}'> {% translate 'Check In' %} </button></td>
          {% endif %}
      </tr>
      {% endfor %}

    </tbody>
  </table>

  {% else %}

  <div class="alert alert-warning border border-warning booking-info">
    <div class="material-icons booking-info-icon">error</div>
      <div> {% translate 'You don\'t have bookings.' %} </div>
  </div>

  {% endif %}

</div> <!-- Cierre del Col-Lg-6 -->

<div class="col-lg-3 col-sm-12">
</div>
</div>





{% endblock %}